{"version":3,"file":"component---src-pages-explore-tsx-6c535ffb0266aa7c61f8.js","mappings":"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","sources":["webpack://emperor/../lib/orderBy.ts","webpack://emperor/./src/pages/explore.tsx","webpack://emperor/./src/utils/orderEmperors.ts"],"sourcesContent":[null,"import React, { useState } from 'react';\nimport { graphql } from 'gatsby';\n\nimport ClearableInput from 'meiko/ClearableInput';\n\nimport Layout from '@/components/Layout';\nimport SEO from '@/components/SEO';\nimport Listing, { SortKey } from '@/components/Listing';\nimport GoTo from '@/components/GoTo';\n\nimport { useMountedOnClient } from '@/hooks/useMountedOnClient';\nimport { Emperor } from '@/interfaces/Emperor';\nimport { EMPPage } from '@/interfaces/EMPPage';\nimport orderEmperors from '@/utils/orderEmperors';\n\ninterface HomeProps\n  extends EMPPage<{ allEmperorsJson: { nodes: Emperor[] } }> {}\n\nfunction getTitle(key: SortKey, isDesc: boolean) {\n  const direction = isDesc ? 'descending' : 'ascending';\n  let sortText = 'ordered chronological';\n\n  if (key === 'name') {\n    sortText = 'ordered alphabetical';\n  } else if (key === 'reignLengthInDays') {\n    sortText = 'ordered by reign length';\n  } else {\n    sortText +=\n      key === 'daysSinceReignStart'\n        ? ' (on reign start date)'\n        : key === 'daysSinceReignEnd'\n        ? ' (on reign end date)'\n        : '';\n  }\n\n  return `Roman Emperors ${sortText} (${direction})`;\n}\n\nexport default (props: HomeProps) => {\n  const mounted = useMountedOnClient();\n  const [searchString, setSearchString] = useState('');\n  const [sortKey, setSortKey] = useState<SortKey>('daysSinceReignStart');\n  const [isDesc, setIsDesc] = useState<boolean>(false);\n\n  const title = getTitle(sortKey, isDesc);\n  const lowerSearch = searchString.toLocaleLowerCase();\n\n  const items: Emperor[] = props.data.allEmperorsJson.nodes;\n  const filteredItems = orderEmperors(\n    items.filter((x) => x.name.toLocaleLowerCase().includes(lowerSearch)),\n    sortKey,\n    isDesc\n  );\n\n  return (\n    <Layout>\n      <SEO\n        title=\"Explore\"\n        description=\"Explore the Emperors of Rome searching for them by name and sorting on a variety of fields.\"\n      />\n      {mounted && (\n        <div>\n          <ClearableInput\n            id=\"search\"\n            name=\"search\"\n            label=\"Filter emperors by name\"\n            value={searchString}\n            onChange={(e) => {\n              const element = e.target as HTMLInputElement;\n              setSearchString(element.value);\n            }}\n          />\n        </div>\n      )}\n      <GoTo data={filteredItems} />\n      <Listing\n        title={title}\n        data={filteredItems}\n        grouping={() => 'Emperors'}\n        showInSingleTable\n        isSortDesc={isDesc}\n        sortKey={sortKey}\n        onSortToggle={(k) => {\n          setIsDesc((p) => (sortKey === k ? !p : p));\n          setSortKey(k);\n        }}\n      />\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query ExploreEmperorsQuery {\n    allEmperorsJson {\n      nodes {\n        id\n        slug\n        name\n        image {\n          childImageSharp {\n            gatsbyImageData(width: 100, height: 144, layout: FIXED)\n          }\n        }\n        house\n        succession\n        reignStart\n        reignEnd\n        reignLengthInDays\n        daysSinceReignStart\n        daysSinceReignEnd\n        empire\n        reignCount\n      }\n    }\n  }\n`;\n","import orderBy from 'ayaka/orderBy';\n\nimport { SortKey } from '@/components/Listing';\nimport { Emperor } from '@/interfaces/Emperor';\n\ninterface EmperorOrder {\n  props: string[];\n  orders: (isDesc: boolean) => string[];\n}\n\nconst orders = new Map<SortKey, EmperorOrder>([\n  [\n    'name',\n    { props: ['name'], orders: (isDesc) => (isDesc ? ['desc'] : ['asc']) }\n  ],\n  [\n    'daysSinceReignStart',\n    {\n      props: ['daysSinceReignStart', 'daysSinceReignEnd'],\n      orders: (isDesc) => (isDesc ? ['asc', 'asc'] : ['desc', 'desc'])\n    }\n  ],\n  [\n    'daysSinceReignEnd',\n    {\n      props: ['daysSinceReignEnd', 'daysSinceReignStart'],\n      orders: (isDesc) => (isDesc ? ['asc', 'asc'] : ['desc', 'desc'])\n    }\n  ],\n  [\n    'reignLengthInDays',\n    {\n      props: ['reignLengthInDays', 'name'],\n      orders: (isDesc) => (isDesc ? ['desc', 'asc'] : ['asc', 'asc'])\n    }\n  ]\n]);\n\nexport default function orderEmperors<T extends Emperor>(\n  list: T[],\n  key: SortKey,\n  isDesc: boolean\n) {\n  const args = orders.get(key) as EmperorOrder;\n  return orderBy(list, args.props, args.orders(isDesc)) as T[];\n}\n"],"names":["get","from","_len","arguments","length","selectors","Array","_key","concat","map","s","replace","split","filter","t","reduce","prev","cur","arr","props","orders","undefined","_toConsumableArray","sort","a","b","acc","prop","i","aVal","bVal","_ref2","_slicedToArray","p1","p2","orderBy","mounted","useMountedOnClient","searchString","setSearchString","useState","sortKey","setSortKey","isDesc","setIsDesc","title","key","sortText","getTitle","lowerSearch","toLocaleLowerCase","items","data","allEmperorsJson","nodes","filteredItems","orderEmperors","x","name","includes","React","Layout","SEO","description","ClearableInput","id","label","value","onChange","e","element","target","GoTo","Listing","grouping","showInSingleTable","isSortDesc","onSortToggle","k","p","Map","list","args"],"sourceRoot":""}